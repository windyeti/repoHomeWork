{"version":3,"names":[],"mappings":"","sources":["main.js"],"sourcesContent":["function Container() {\n\tthis.id = '';\n\tthis.className = '';\n\tthis.htmlCode = '';\n}\nContainer.prototype.render = function() {\n\treturn this.htmlCode\n}\nfunction Basket() {\n\tContainer.call(this);\n\n\tthis.id = 'basket';\n\tthis.countGoods = 0;\n\tthis.amount = 0;\n\tthis.goodItems = [];\n}\nBasket.prototype = Object.create(Container.prototype);\nBasket.prototype.constructor = Basket;\nBasket.prototype.render = function(wrapper) {\n\tthis.$divBasket = $('<div>').attr({\n\t\t\tid: this.id\n\t\t}).text('Корзина');\n\n\tthis.$divBasket.appendTo(wrapper);\n\n\tthis.getGoodItems();\n}\nBasket.prototype.getGoodItems = function() {\n\t$.ajax({\n\t\turl : 'basket.goods.json',\n\t\tdataType : 'json',\n\t\tcontext : this,\n\t\tsuccess : function(data) {\n\t\t\tif(data.result == 1) {\n\t\t\t\tthis.countGoods = data.basket.length;\n\t\t\t\tthis.amount = data.amount;\n\t\t\t\tthis.goodItems = data.basket;\n\n\t\t\t\tthis.$divData = $('<div>').attr({'class' : 'div-data'});\n\t\t\t\tthis.$divData.append( $('<p>').attr({'class' : 'count-good'}).text('Всего товаров в корзине: ' + this.countGoods) )\n\t\t\t\tthis.$divData.append( $('<p>').attr({'class' : 'amount'}).text('На сумму: ' + this.amount) )\n\t\t\t\tthis.$divData.appendTo(this.$divBasket);\n\n\t\t\t} else {\n\t\t\t\tconsole.log('что-то на сервере не так');\n\t\t\t}\n\t\t},\n\t\terror : function(err) {\n\t\t\tconsole.log(err.message)\n\t\t}\n\t});\n}\nBasket.prototype.add = function(idGood, quantity, price) {\n\tthis.countGoods += quantity;\n\tthis.amount += price;\n\tthis.goodItems.push({\n\t\tid_good : idGood,\n\t\tprice : price\n\t});\n\tthis.refresh();\n}\nBasket.prototype.refresh = function() {\n\tthis.$divData.empty();\n\tthis.$divData.append( $('<p>').attr({'class' : 'count-good'}).text('Всего товаров в корзине: ' + this.countGoods) )\n\tthis.$divData.append( $('<p>').attr({'class' : 'amount'}).text('На сумму: ' + this.amount) )\n\tthis.$divData.appendTo(this.$divBasket);\n}\nvar basket = new Basket();\n// var $basketWrapper = $('#basket-wrapper');\nbasket.render('#basket-wrapper');"],"file":"main.js"}